language: php
php:
- '7.2'
- '7.3'
- '7.4'
before_script:
- composer self-update
- composer install --prefer-source --no-interaction --dev
script:
- phpunit --coverage-clover=coverage.xml
- php codecov.php coverage.xml 1
after_success:
- bash <(curl -s https://codecov.io/bash)
before_deploy:
- wget http://get.sensiolabs.org/sami.phar
- php sami.phar update sami-config.php --force
deploy:
  provider: s3
  bucket: wappr
  edge: true # opt in to dpl v2
  local_dir: ./build
  acl: public_read
  on:
    branch: master
    php: '7.3'
  access_key_id:
    secure: kGyGQXfnKHWsecySdxA9NvoWywMicR3PgElao8cdaExwxv7f38ciFxRefD2XFi+YR+QzWNxX4CIe+cNAaEwH6Mw74cSbFUJ/x43A2HHx5lRiIaO7qK2ODMTNXUczmwkthBCwQ/MS8wX6qJ2gMCP/kdX/6VCDdZXmfNVDdtTM0QWCLcGi5EdKXohaPDft3uTXw+qPxR6f8xIpWWajHroJMTbjdL0vltzLZ6heUnL8rPkiWaQMcDpJwXSxOcfwMZRMdEDtpehcdeIXVBJz9M+w3yutq/4v9A9anzr6nGS7xKuXvcwQIXnzMDLBSeBVD1r8OJd08nGr039GU1IRoFkhwQtQi1zW9ZQLYsK3HbcgfEtLi5R0Emsrsyef7UDvo7qeOhxCxzLLG4qza+Z6Vd1CUB9n6wij8q7ctIZUP3r7lC3/5JfkCFrqDiUsxFstTDf8Vvzl0Rl/EG2fl8jEMviH5Qn92My26gFko1887D7bndRkbN6lHdEKGcDXARLH38ZHi/Zg5ZV9uu6EYDiXc0INKMWeO6UUs1k/csCNTCqzfl9vrppwcXZ1ksS7JcfSUK2yL8uBL2ys5aFHEK5ooGeIeK2fTBifEXuqtsDn3+X7wQ58EHNnTkS/1qk4idXaPE502o3T51D0tNbqNPz/DzjaLOEiUGPKKmX7smXxG5nL6ak=
  access_key_secret:
    secure: E3jZf4bPzlk92MWHhL84CvZFgQW6W+MX9wuk4JMCg4g9tr2cFIQ1WzJIOpiFAJNB4QLwzGAEOlN1jlr1C0KUgjZYGhEpoY/zpLrqmpWpXcydnVP7r8Aznj2Q8Lohl4wIZpa9rzZVatg98V1oBaE5Ucuqu4fFcdC8AQWLStddyu3+nJyD8ME+RUgSKbFLnvpaxxatCXuCWne6fOia+YQgnKi3YjTYjThActH9XV767xC11kvQB2r01Flzp7okzRmc214MSM+xuNn6KR1Ow7kUKPlqhdvbd+kVYAF8Kz0vGaJeSZQpoq8puAGRyWcMOj9mA2KVPheLL8RNqXVPOCWkxvsfQyA6FsF49hlAGDjYy9GF/Gtqf5hA6ZUzA6Su2wj8EkAHUiIlgtP8hLFn7B3kv4Ebyd5HVCqPAbbpHa8PWMJwz3u6bGGoqTGuKgBYRccdgFf7cM8WqX8jtEQK8jtGzIM7yoePIrn/uvVquctV2p49nj9bp6IvS4ggBIHRVziEQaOfo6n5csNc80OYONzJeLIztMOL0+mb35jjHXyivlt5OLEtnLhuos5rll5UFSPPADcLHX2U+lUlci3oH9cUnLtbDOr//zJ71B9uCPCksMcePL8bMFuRmNy0ftu5bOU+UKPWn7OQZ35FcNtZpFmanNE3EOTgcIv1rZfBICXD11U=
